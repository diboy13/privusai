(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{48390:function(e,t,r){Promise.resolve().then(r.bind(r,13381))},13381:function(e,t,r){"use strict";r.d(t,{default:function(){return ex}});var n,a,l,s,i,o,c,u,d,h,g,m,f=r(57437),x=r(2265),v=r(24623),_=r(16591),j=r(16463),p=r(29642),E=r(77051),N=r(25500);(n=o||(o={})).LOCAL="local",n.STAGING="staging",n.PRODUCTION="production",(a=c||(c={})).EN="en",a.RU="ru",(l=u||(u={})).DEVELOPMENT="development",l.PRODUCTION="production",l.UNDEFINED="undefined",(s=d||(d={})).VALID="valid",s.FAIL="fail",(i=h||(h={})).INACTIVE="inactive",i.ON_MARKETPLACE="on_marketplace",i.RENTED="rented",i.LEASE="lease",i.FINISHED="finished",i.CANCELLED_BY_RENTER="cancelled_by_renter",i.CANCELLED_BY_OWNER="cancelled_by_owner",i.EXPIRED="expired";let y=(e,t)=>t?t.filter(t=>t.status===e):[];var b=r(80655),C=r(1655),Z=r.n(C),L=e=>{let{...t}=e;return(0,f.jsx)(b.Z,{className:Z().root,...t})},k=r(39063);let O=(e,t)=>y(h.ON_MARKETPLACE,e).filter(e=>{if(null===e.rent_user_id&&e.owner_user_id===t)return e}),w=(e,t)=>[{label:"On marketplace [ ".concat(e.length," ]"),value:"onMarketplace"},{label:"In active rent [ ".concat(t.length," ]"),value:"inActiveRent"}];var P=r(62586),A=r(25057),R=r(54522),B=()=>(0,f.jsx)(v.Z,{gap:24,vertical:!0,children:(0,f.jsxs)(P.ZP,{theme:{algorithm:A.Z.darkAlgorithm},children:[(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:58}}),(0,f.jsxs)(v.Z,{gap:8,vertical:!0,children:[(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:138}}),(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:138}}),(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:138}})]})]})}),I=r(1450),D=r(7598),S=r.n(D),T=r(56800),F=e=>{let{className:t,children:r,centered:n,...a}=e,l=T(S().root,n&&S().centered,t);return(0,f.jsx)("div",{className:l,...a,children:r})},Y=()=>(0,f.jsx)(F,{centered:!0,style:{minHeight:530,width:"100%"},children:(0,f.jsx)(I.Z,{type:"secondary",style:{fontSize:22},children:"You don't have any offers yet"})}),M=e=>{let{isLoading:t,offers:r,userId:n}=e,[a,l]=(0,x.useState)(0),s=O(r,n),i=y(h.RENTED,r),o=w(s,i),[c,u]=(0,x.useState)(o[0].value);return(0,x.useEffect)(()=>{let e=setTimeout(()=>{l(a+60)},6e4);return()=>clearTimeout(e)},[a]),(0,f.jsx)(f.Fragment,{children:t?(0,f.jsx)(B,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L,{block:!0,style:{marginBottom:24},defaultValue:o[0].value,options:o,value:c,onChange:u}),(0,f.jsx)(v.Z,{gap:8,vertical:!0,children:r&&0===r.length?(0,f.jsx)(Y,{}):(0,f.jsx)(f.Fragment,{children:c===o[0].value?s.length>0?s.map(e=>(0,f.jsx)(k.Z,{item:e,place:"offersMarketplace",type:"earn",userId:n},e.id)):(0,f.jsx)(Y,{}):i.length>0?(0,f.jsx)(f.Fragment,{children:(0===a||a>0)&&i.map(e=>(0,f.jsx)(k.Z,{item:e,place:"offersActiveRent",userId:n},e.id))}):(0,f.jsx)(Y,{})})})]})})},H=r(46682),W=r(637),z=r(3650),U=r(62737),V=r.n(U);let K=e=>{let t=V()(e).format("DD.MM.YYYY"),r=V()(e).format("HH:mm");return"".concat(t," [").concat(r,"]")};var G=r(62429),Q=r(47970),X=r(4410);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var J=function(e){return X.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),g||(g=X.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 14c0 1.657 2.686 3 6 3s6-1.343 6-3M9 14c0-1.657 2.686-3 6-3s6 1.343 6 3M9 14v4c0 1.656 2.686 3 6 3s6-1.344 6-3v-4M3 6c0 1.072 1.144 2.062 3 2.598s4.144.536 6 0S15 7.072 15 6s-1.144-2.062-3-2.598-4.144-.536-6 0S3 4.928 3 6m0 0v10c0 .888.772 1.45 2 2m-2-7c0 .888.772 1.45 2 2"})))};function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var ee=function(e){return X.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),m||(m=X.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8V5a1 1 0 0 0-1-1H6a2 2 0 0 0-2 2m0 0a2 2 0 0 0 2 2h12a1 1 0 0 1 1 1v3M4 6v12a2 2 0 0 0 2 2h12a1 1 0 0 0 1-1v-3m1-4v4h-4a2 2 0 0 1 0-4z"})))};let et={minWidth:65,textAlign:"center",margin:0,color:"var(--color-black)"},er=e=>{switch(e.status){case h.FINISHED:return(0,f.jsx)(z.Z,{bordered:!1,style:et,color:"var(--color-green)",children:"Completed"});case h.CANCELLED_BY_OWNER:case h.CANCELLED_BY_RENTER:return(0,f.jsx)(z.Z,{bordered:!1,style:et,color:"var(--color-pear)",children:"Cancelled"});default:return null}},en=(e,t)=>{switch((0,Q._)(e,t)){case"earn":return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ee,{width:24,height:24}),(0,f.jsx)(I.Z,{strong:!0,style:{fontSize:24},children:"Earn"})]});case"borrow":return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J,{width:24,height:24}),(0,f.jsx)(I.Z,{strong:!0,style:{fontSize:24},children:"Borrow"})]})}},ea=(e,t)=>{let r=(0,Q._)(e,t),n=e.status,a=n===h.CANCELLED_BY_OWNER||n===h.CANCELLED_BY_RENTER,l=[{label:"Order No.",value:"#".concat(e.offer_number)},{label:"Start date",value:K(e.rent_start_time)},{label:"".concat(a?"Cancellation date":"End date"),value:"".concat(a?K(e.cancellation_time):K(e.expected_finish_time))},{label:"Amount",value:"".concat(e.amount," CLORE")},{label:"Time Period",value:(0,G.y)(e.rent_time)},{label:"APY",value:"".concat(e.annual_rate,"%")}];return"borrow"===r&&l.push({label:"Paid amount",value:"".concat(e.current_earnings," CLORE")}),"earn"===r&&l.push({label:"Earned amount",value:"".concat(e.current_earnings," CLORE")}),l};var el=r(70447),es=r.n(el),ei=e=>{let{label:t,value:r}=e;return(0,f.jsxs)(v.Z,{gap:8,justify:"space-between",className:es().root,children:[(0,f.jsx)(I.Z,{type:"secondary",style:{fontSize:18},children:t}),(0,f.jsx)(I.Z,{style:{fontSize:18},children:r})]})},eo=r(22670),ec=r.n(eo),eu=r(65213),ed=e=>{let{offer:t,userId:r}=e,{setNotification:n}=(0,eu.Z)(),[a,l]=(0,x.useState)(!1),s=er(t),i=en(t,r),o=ea(t,r),c=t.owner_user_id===r,u=(0,E.PY)(()=>{n({type:"success",message:"Success",description:"Offer created successfully"})});return(0,f.jsxs)("div",{className:ec().root,children:[(0,f.jsxs)(v.Z,{justify:"space-between",align:"center",gap:16,children:[(0,f.jsx)(v.Z,{align:"center",gap:8,className:ec().title,children:i}),s]}),(0,f.jsx)(v.Z,{gap:4,vertical:!0,flex:1,children:o.map((e,t)=>(0,f.jsx)(ei,{label:e.label,value:e.value},"".concat(e.value,"-").concat(t)))}),(0,f.jsx)(v.Z,{vertical:!0,gap:32,children:c&&(0,f.jsx)(H.ZP,{type:"primary",size:"small",block:!0,onClick:()=>{let e={offer:{amount:Number(t.amount),rent_time:Number(t.rent_time),annual_rate:Number(t.annual_rate)}};e&&u.mutate(e)},children:"Reactivate"})}),(0,f.jsx)(W.Z,{open:a,onCancel:()=>{l(!1)},offerId:t.id})]})},eh=()=>(0,f.jsx)(v.Z,{gap:24,vertical:!0,style:{},children:(0,f.jsxs)(P.ZP,{theme:{algorithm:A.Z.darkAlgorithm},children:[(0,f.jsx)(R.Z.Button,{active:!0,style:{height:38,width:250,marginTop:60,marginBottom:24}}),(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:58}}),(0,f.jsx)(R.Z.Button,{active:!0,block:!0,style:{height:625}})]})}),eg=e=>{let{isLoading:t,offers:r,userId:n,fetchNextPage:a,hasNextPage:l,isFetchingNextPage:s}=e,i=[...y(h.FINISHED,r),...y(h.CANCELLED_BY_OWNER,r),...y(h.CANCELLED_BY_RENTER,r)],o=["Offers [ ".concat(i.length," ]")];return(0,f.jsxs)(f.Fragment,{children:[t?(0,f.jsx)(eh,{}):(0,f.jsx)(f.Fragment,{children:r&&i.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_.Z,{level:3,style:{marginTop:60,marginBottom:24},children:"Your history"}),(0,f.jsx)(L,{block:!0,options:o,value:o[0],style:{marginBottom:24}}),(0,f.jsx)(v.Z,{gap:20,wrap:!0,children:i.map(e=>(0,f.jsx)(ed,{offer:e,userId:n},e.id))})]})}),l&&(0,f.jsx)(v.Z,{justify:"center",style:{marginTop:60},children:(0,f.jsx)(H.ZP,{size:"small",onClick:a,loading:s,disabled:s,children:s?"Loading more...":"Load More"})})]})},em=r(96776),ef=r.n(em),ex=()=>{let e=(0,j.useSearchParams)(),{data:t}=(0,p.pg)(),r=(0,x.useCallback)((t,r)=>{let n=new URLSearchParams(e.toString());return n.set(t,r),n},[e]),{data:n,isLoading:a}=(0,E.P7)(e),{data:l,isLoading:s,fetchNextPage:i,hasNextPage:o,isFetchingNextPage:c}=(0,E.P7)(r("offers_type","history")),u=null==n?void 0:n.pages.map(e=>e.items).flat(),d=null==l?void 0:l.pages.map(e=>e.items).flat(),h=null==t?void 0:t.user_id;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(v.Z,{className:ef().header,justify:"space-between",align:"center",children:[(0,f.jsx)(_.Z,{level:3,children:"Active offers"}),(0,f.jsx)(N.Z,{})]}),(0,f.jsx)(M,{isLoading:a,offers:u,userId:h}),(0,f.jsx)(eg,{isLoading:s,offers:d,userId:h,fetchNextPage:i,hasNextPage:o,isFetchingNextPage:c})]})}},22670:function(e){e.exports={root:"OfferHistoryCard_root__3PMCh",title:"OfferHistoryCard_title__Zbp91"}},70447:function(e){e.exports={root:"OfferHistoryCardParam_root__ggWk5"}},7598:function(e){e.exports={root:"Box_root__vWYTO",centered:"Box_centered__Qllsf"}},1655:function(e){e.exports={root:"SegmentedExt_root__WxtIv"}},96776:function(e){e.exports={header:"PageOffers_header__ds3AK"}}},function(e){e.O(0,[938,88,7,566,634,757,655,45,971,23,744],function(){return e(e.s=48390)}),_N_E=e.O()}]);